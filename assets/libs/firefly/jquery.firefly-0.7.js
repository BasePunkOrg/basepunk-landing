(function($){var defaults={total:10,ofTop:0,ofLeft:0,on:'document.body',twinkle:0.2,minPixel:1,maxPixel:2,color:'#fff',namespace:'jqueryFireFly',zIndex:Math.ceil(Math.random()*20)-1,borderRadius:'50%',_paused:false};$.firefly=function(settings){$.firefly.settings=$.extend({},defaults,settings);$.firefly.element=$.firefly.settings.on;if(typeof $.firefly.settings.on==='string'){$.firefly.element=$($.firefly.settings.on)}
$.firefly.eleHeight=$.firefly.element.outerHeight();$.firefly.eleWidth=$.firefly.element.outerWidth();$(window).resize(function(){if($.firefly.settings.on!=='document.body'){var off=$.firefly.element.offset();$.firefly.offsetTop=off.top;$.firefly.offsetLeft=off.left;}else{$.firefly.offsetTop=0;$.firefly.offsetLeft=0;}
$.firefly.eleHeight=$.firefly.element.outerHeight();$.firefly.eleWidth=$.firefly.element.outerWidth();});if($.firefly.settings.on!=='document.body'){var off=$($.firefly.settings.on).offset();$.firefly.offsetTop=off.top;$.firefly.offsetLeft=off.left;}else{$.firefly.offsetTop=0;$.firefly.offsetLeft=0;}
for(i=0;i<$.firefly.settings.total;i++){var randomPixel=$.firefly.randomPixel($.firefly.settings.minPixel,$.firefly.settings.maxPixel);var sp=$.firefly.create(randomPixel);$.firefly.fly(sp);}
$.firefly.sparks=$.firefly.element.children('.'+$.firefly.settings.namespace);return this;};$.firefly.pause=function(bool){$.firefly.settings._paused=true;if(bool){$.each($.firefly.sparks,function(iter,sp){$(sp).stop(true);});}};$.firefly.resume=function(){$.firefly.settings._paused=false;$.each($.firefly.sparks,function(iter,sp){$.firefly.fly(sp);});};$.firefly.create=function(pixelSize){spark=$('<div>').hide();spark.addClass($.firefly.settings.namespace);$.firefly.settings._onSparkID++;if($.firefly.settings.on==='document.body'){$(document.body).append(spark);}else{$($.firefly.settings.on).append(spark);}
var opacity=(Math.floor(Math.random()*(9-4+1))+4)/10;return spark.css({'position':'absolute','width':pixelSize,'height':pixelSize,'background-color':$.firefly.settings.color,'z-index':$.firefly.settings.zIndex,'border-radius':$.firefly.settings.borderRadius,'opacity':opacity,'top':$.firefly.random(($.firefly.eleHeight-50)),'left':$.firefly.random(($.firefly.eleWidth-50)),'pointer-events':'none'}).show();};$.firefly.fly=function(sp){$(sp).animate({top:$.firefly.random(($.firefly.eleHeight-50)),left:$.firefly.random(($.firefly.eleWidth-50)),},{duration:(($.firefly.random(10)+5)*2000),done:function(){if(!$.firefly.settings._paused){$.firefly.fly(sp);}}});};$.firefly.randomPixel=function(min,max){return Math.floor(Math.random()*(max-min+1)+min);};$.firefly.random=function(max){return Math.ceil(Math.random()*max)-1;};$.firefly.opacity=function(min){op=Math.random();if(op<min){return 0;}else{return 1;}};})(jQuery);